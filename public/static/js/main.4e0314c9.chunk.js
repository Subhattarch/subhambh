(this["webpackJsonptech-surf-calendar"]=this["webpackJsonptech-surf-calendar"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(10),c=n.n(i),o=(n(16),n(3)),s=n(1),u=n.n(s),l=n(6),d=function(e,t){return new Date(t,e+1,0).getDate()},m=function(e,t){return Array.from({length:t},(function(t,n){return n+e}))},j=function(e,t){var n=null!==t&&void 0!==t?t:[],r=e;return function(e,t){var a;return null==e?n:(n[e]=null!==(a=n[e])&&void 0!==a?a:r,null!=t?(n[e]=t,n):n[e])}};var v=function(e){var t,n=Object(r.useState)(e),a=Object(o.a)(n,2),i=a[0],c=a[1],s="object"===typeof(t=i)&&t instanceof Object&&!(t instanceof Array),u=Object(r.useCallback)((function(e){c((function(t){return s?Object(l.a)(Object(l.a)({},t),"function"===typeof e?e(t):e):"function"===typeof e?e(t):e}))}),[c,s]);return[i,u]},b=(n(17),n(4)),f=["January","February","March","April","May","June","July","August","September","October","November","December"],p=(n(18),n(0)),h=function(e){var t=e.month,n=e.dateRange,r=e.lastDateRange,a=e.dateStartAt,i=e.year,c=e.selectedDate,o=e.setYear,s=e.setMonth,u=e.setDate,l=e.setFocused;return Object(p.jsxs)("div",{id:"calendar",children:[Object(p.jsxs)("div",{id:"year-month-wraper",children:[Object(p.jsxs)("div",{id:"year-wraper",children:[Object(p.jsx)("input",{type:"number",id:"year",value:i,onChange:function(e){o(parseInt(e.target.value))}}),Object(p.jsxs)("span",{id:"change-year",children:[Object(p.jsx)("button",{className:"increament",onClick:function(){o((function(e){return++e}))}}),Object(p.jsx)("button",{className:"decreament",onClick:function(){o((function(e){return--e}))}})]})]}),Object(p.jsx)("select",{id:"month",onChange:function(e){s(f.indexOf(e.target.value))},value:f[t],children:f.map((function(e,t){return Object(p.jsx)("option",{value:e,children:e},t)}))})]}),Object(p.jsxs)("div",{id:"calendar-grid",children:[Object(p.jsx)("span",{className:"calendar-cell day",style:{color:"orangered"},children:"Sun"}),Object(p.jsx)("span",{className:"calendar-cell day",children:"Mon"}),Object(p.jsx)("span",{className:"calendar-cell day",children:"Tue"}),Object(p.jsx)("span",{className:"calendar-cell day",children:"Wed"}),Object(p.jsx)("span",{className:"calendar-cell day",children:"Thu"}),Object(p.jsx)("span",{className:"calendar-cell day",children:"Fri"}),Object(p.jsx)("span",{className:"calendar-cell day",style:{color:"orange"},children:"Sat"}),m(r-a+1,a).map((function(e,n){return Object(p.jsx)("button",{className:"calendar-cell not-current",style:n%7===0?{color:"orangered"}:n%7===6?{color:"orange"}:{},onClick:function(){u(e),s((function(e){return 0===e?11:e-1})),o((function(e){return 0===t?e-1:e})),l([-1,-1])},children:e},e)})),Object(b.a)(m(1,n)).map((function(e){return Object(p.jsx)("button",{className:"calendar-cell ".concat(e===c?"selected":""),onClick:function(){u(e),l([-1,-1])},style:(e+a-1)%7===0?{color:"orangered"}:(e+a)%7===0?{color:"orange"}:{},children:e},e)})),m(1,42-a-n).map((function(e){return Object(p.jsx)("button",{className:"calendar-cell not-current",style:(e+n+a-1)%7===0?{color:"orangered"}:(e+n+a)%7===0?{color:"orange"}:{},onClick:function(){u(e),s((function(e){return 11===e?0:e+1})),o((function(e){return 11===t?e+1:e})),l([-1,-1])},children:e},e)}))]})]})},O=(n(20),function(e){var t=e.year,n=e.month,a=e.date,i=e.user,c=e.Ref,l=e.CreateEvent,d=e.ShowEvents,j=e.allEvents,f=e.setAllEvents,h=e.setFocused,O=e.Focused,x="".concat(a,"-").concat(n,"-").concat(t),F=v(null!=j[x]?j[x]:(Object(s.get)("./calendar/".concat(i,"-").concat(x,".json"),(function(e){var t={};t[x]=e,f(t),y(e)}),"json"),[])),g=Object(o.a)(F,2),D=g[0],y=g[1],C=c.current;return Object(r.useEffect)((function(){var e={};e[x]=C,f(e),y(C)}),[c,C,x,f,y]),Object(r.useEffect)((function(){Object(s.get)("./calendar/".concat(i,"-").concat(x,".json"),(function(e){c.current=e;var t={};t[x]=e,f(t),y(e)}),"json").fail((function(){var e;if(console.log("no previous data"),null!=j[x]&&0===(null===(e=j[x])||void 0===e?void 0:e.length))return c.current=j[x],void y(j[x])})),c.current=[],y([])}),[x,i]),c.current||(c.current=D),Object(p.jsxs)("div",{id:"Events",children:[((null===D||void 0===D?void 0:D.length)||0!==(null===D||void 0===D?void 0:D.length))&&Object(p.jsx)("h2",{children:"Events"}),(null===D||void 0===D?void 0:D.length)&&0!==(null===D||void 0===D?void 0:D.length)?Object(p.jsxs)("div",{className:"event-container",style:{position:"relative",overflowY:"auto"},ref:function(e){var t,n,r=parseInt(u()("html").css("font-size"));O[0]>-1&&O[1]>-1&&(null===(t=u()(e))||void 0===t||t.scrollTop((null===D||void 0===D||null===(n=D[O[0]])||void 0===n?void 0:n[O[1]].startTime)*r*.3))},children:[null===D||void 0===D?void 0:D.map((function(e,t){var n=d(t),r=Object(b.a)(e)[n],a=(null===r||void 0===r?void 0:r.startTime)<60?0:Math.floor((null===r||void 0===r?void 0:r.startTime)/60)%12||12,i=(null===r||void 0===r?void 0:r.startTime)%60,c=(null===r||void 0===r?void 0:r.endTime)<60?0:Math.floor((null===r||void 0===r?void 0:r.endTime)/60)%12||12,o=(null===r||void 0===r?void 0:r.endTime)%60;return Object(p.jsxs)("div",{onClick:function(){h([t,n])},style:{position:"absolute",top:"".concat(.3*(null===r||void 0===r?void 0:r.startTime),"rem"),minHeight:t===O[0]&&n===O[1]?"".concat(.3*((null===r||void 0===r?void 0:r.endTime)-(null===r||void 0===r?void 0:r.startTime)),"rem"):"3rem",height:t===O[0]&&n===O[1]?"auto":"".concat(.3*((null===r||void 0===r?void 0:r.endTime)-(null===r||void 0===r?void 0:r.startTime)),"rem"),overflow:"hidden"},className:"event ".concat(t===O[0]&&n===O[1]?"focus":""),children:[Object(p.jsxs)("p",{className:"time",children:["From ",a,":",i," ",(null===r||void 0===r?void 0:r.startTime)<=720?"am":"pm"," ","to ",c,":",o," ",(null===r||void 0===r?void 0:r.endTime)<=720?"am":"pm"]}),Object(p.jsx)("h3",{children:null===r||void 0===r?void 0:r.title}),Object(p.jsx)("p",{children:null===r||void 0===r?void 0:r.description})]},t)})),m(0,49).map((function(e){return e%2===0?Object(p.jsxs)("p",{style:{position:"absolute",top:"".concat(9*e,"rem"),left:"0",width:"100%",borderTop:"0.05em solid",pointerEvents:"none"},children:[0===e?0:e/2%12||12," ",e/2>12?"pm":"am"]},e):Object(p.jsx)("p",{style:{position:"absolute",top:"".concat(9*e,"rem"),width:"100%",borderTop:"0.01em solid",left:"0",pointerEvents:"none"},children:"30"},e)}))]}):Object(p.jsx)("h1",{children:"No Events Today"}),Object(p.jsx)("button",{onClick:l,children:"Create new Event"})]})}),x=(n(21),function(e){var t=e.Ref,n=e.toggleCreation,r=e.changeEventShowed,a=e.setFocus,i=e.setMessage,c=v(0),s=Object(o.a)(c,2),l=s[0],d=s[1],m=v(0),f=Object(o.a)(m,2),h=f[0],O=f[1],x=v(0),F=Object(o.a)(x,2),g=F[0],D=F[1],y=v(0),C=Object(o.a)(y,2),T=C[0],w=C[1],E=v("am"),M=Object(o.a)(E,2),S=M[0],k=M[1],N=v("am"),A=Object(o.a)(N,2),I=A[0],B=A[1];return Object(p.jsx)("div",{id:"create-event",onClick:function(){n(!1)},children:Object(p.jsxs)("form",{onClick:function(e){e.stopPropagation()},onSubmit:function(e){e.preventDefault();var c=u()(e.target),o=parseInt(c.find("#startMinute").val())+60*(parseInt(c.find("#startHour").val())+("am"===c.find("#AMPMStart").val()?0:12)),s=parseInt(c.find("#endMinute").val())+60*(parseInt(c.find("#endHour").val())+("am"===c.find("#AMPMEnd").val()?0:12)),l={title:c.find("#title").val(),description:c.find("#description").val(),startTime:o,endTime:s};Array.isArray(t.current)||(t.current=[]);var d=t.current.find((function(e){var t;return(null===(t=e[0])||void 0===t?void 0:t.startTime)===l.startTime})),m=t.current.indexOf(d);n(!1),a([-1,-1]),r((function(){return j(0)})),null!=d?(d.find((function(e){return e.title===l.title&&e.description===l.description}))&&i({text:"two events can't have identicle title and description",error:!0}),t.current[m]=[].concat(Object(b.a)(d),[l]).sort((function(e,t){return-e.endTime+t.endTime-t.startTime+e.startTime}))):t.current=[].concat(Object(b.a)(t.current),[[l]]).sort((function(e,t){var n,r;return(null===(n=e[0])||void 0===n?void 0:n.startTime)-(null===(r=t[0])||void 0===r?void 0:r.endTime)}))},children:[Object(p.jsx)("h2",{children:"Create Event"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"title",children:"Title"}),Object(p.jsx)("input",{type:"text",name:"title",id:"title",required:!0})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"dscription",children:"Description"}),Object(p.jsx)("textarea",{name:"description",id:"description",cols:60,rows:20,required:!0})]}),Object(p.jsxs)("label",{children:["Start Time",Object(p.jsx)("input",{type:"number",name:"startHour",id:"startHour",className:"number",value:l,onChange:function(e){d(parseInt(e.target.value))},max:12,min:0,required:!0}),":",Object(p.jsx)("input",{type:"number",name:"startMinute",id:"startMinute",className:"number",value:h,onChange:function(e){O(parseInt(e.target.value))},max:12===l?0:59,min:0,required:!0}),Object(p.jsxs)("select",{name:"ampmStart",id:"AMPMStart",value:S,onChange:function(e){k(e.target.value),"pm"===e.target.value&&B("pm")},required:!0,children:[Object(p.jsx)("option",{value:"am",children:"am"}),Object(p.jsx)("option",{value:"pm",children:"pm"})]})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("br",{}),"End Time",Object(p.jsx)("input",{type:"number",name:"endHour",id:"endHour",className:"number",value:g,onChange:function(e){D(parseInt(e.target.value))},min:"am"===I||I===S?l:0,max:12,required:!0}),":",Object(p.jsx)("input",{type:"number",name:"endMinute",id:"endMinute",className:"number",value:T,onChange:function(e){w(parseInt(e.target.value))},min:"am"!==I&&I!==S||g!==l?0:h,max:12===g?0:59,required:!0}),Object(p.jsxs)("select",{name:"ampmEnd",id:"AMPMEnd",value:I,onChange:function(e){if("am"===S)return B(e.target.value);B("pm")},required:!0,children:[Object(p.jsx)("option",{value:"am",children:"am"}),Object(p.jsx)("option",{value:"pm",children:"pm"})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{type:"submit",children:"Create"}),Object(p.jsx)("button",{onClick:function(e){e.preventDefault(),n(!1),a([-1,-1])},children:"cancel"})]})]})})}),F=(n(22),function(e){var t=e.Events,n=e.changeEventShowed,a=e.setFocus;return Object(p.jsx)("div",{id:"SummaryOfEvents",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)(r.Fragment,{children:e.map((function(e,r){var i=(null===e||void 0===e?void 0:e.startTime)<60?0:Math.floor((null===e||void 0===e?void 0:e.startTime)/60)%12||12,c=(null===e||void 0===e?void 0:e.startTime)%60,o=(null===e||void 0===e?void 0:e.endTime)<60?0:Math.floor((null===e||void 0===e?void 0:e.endTime)/60)%12||12,s=(null===e||void 0===e?void 0:e.endTime)%60;return Object(p.jsxs)("button",{className:"SummarisedEvents",onClick:function(){n((function(e){return j(0,e(t,r))})),a([t,r])},children:[Object(p.jsx)("h3",{children:null===e||void 0===e?void 0:e.title}),Object(p.jsxs)("p",{children:["From ",i,":",c," ",(null===e||void 0===e?void 0:e.startTime)<=720?"am":"pm"," ","to ",o,":",s," ",(null===e||void 0===e?void 0:e.endTime)<=720?"am":"pm"]})]},r)}))},t)}))})}),g=(n(23),function(e){var t=e.setSignIn,n=e.setUser,r=e.user,a=e.allEvents,i=e.setMessage;return Object(p.jsxs)("header",{children:[Object(p.jsx)("button",{onClick:function(){"unonymous"!==r?Object(s.post)("/calendar/users/qsave",Object(l.a)({user:r},a),(function(){i({text:"saved"})})).fail((function(){i({text:"save failed",error:!0})})):t(!0)},children:"Save"}),"unonymous"!==r&&Object(p.jsx)("button",{onClick:function(){n("unonymous")},children:"Sign out"})]})}),D=n(9),y=n.n(D),C=n(11),T=(n(25),function(e){var t=e.setUser,n=e.setSignIn,a=Object(r.useRef)(!1),i=Object(r.useRef)(!1),c=Object(r.useRef)(!1),l=v(!0),d=Object(o.a)(l,2),m=d[0],j=d[1];return Object(p.jsx)("div",{id:"sign-in-container",onClick:function(){return n(!1)},children:Object(p.jsxs)("div",{id:"sign-in",onClick:function(e){e.stopPropagation()},children:[Object(p.jsx)("h2",{children:m?"Sign In":"Sign Up"}),Object(p.jsxs)("form",{id:"sign-in-form",onSubmit:function(e){e.preventDefault()},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"name",children:"name"}),Object(p.jsx)("input",{id:"name",onChange:function(e){i.current=!1,a.current=!1,u()("#name").attr({pattern:"^\\w*$"}),u()("#name")[0].setCustomValidity("")},onInvalid:function(e){var t=u()("#name")[0];i.current||a.current||t.setCustomValidity("name must be filled and have alpha numeric")},type:"text",required:!0})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{htmlFor:"password",children:"password"}),Object(p.jsx)("input",{id:"password",type:"password",pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,}$",required:!0,onChange:function(){c.current=!1,u()("#password").attr("pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,}$"),u()("#password")[0].setCustomValidity("")},onInvalid:function(e){if(!c.current){var t=u()("#password")[0],n=u()("#password").val();(null===n||void 0===n?void 0:n.length)<8?t.setCustomValidity("must have atleast 8 characters"):/^(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[a-z])/.test(n)?/^(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[A-Z])/.test(n)?/^(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[0-9])/.test(n)?/^(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*[!#-&\*\+\x2D=@\^_])/.test(n)?t.setCustomValidity(""):t.setCustomValidity("must contain special characters"):t.setCustomValidity("must contain numbers"):t.setCustomValidity("must contain uppercase alphabet"):t.setCustomValidity("must contsin lowercase characters")}}})]}),Object(p.jsx)("input",{type:"submit",onClick:function(){var e=Object(C.a)(y.a.mark((function e(r){var o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u()("#name")[0].checkValidity()&&u()("#password")[0].checkValidity()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(s.get)("/calendar/sign-in-up",{name:u()("#name").val(),password:u()("#password").val(),haveAcount:m},(function(e){console.log(e)}),"json").promise();case 5:if((null===(o=e.sent)||void 0===o?void 0:o.isValid)||(null===o||void 0===o?void 0:o.name)){e.next=12;break}return a.current=!0,u()("#name").attr("pattern",""),u()("#name")[0].setCustomValidity("name ".concat(m?"doesn't exists":"exists")),r.preventDefault(),e.abrupt("return");case 12:if(null===o||void 0===o?void 0:o.isValidPassword){e.next=18;break}return c.current=!0,u()("#password").attr("pattern",""),u()("#password")[0].setCustomValidity("wrong password"),r.preventDefault(),e.abrupt("return");case 18:t(null===o||void 0===o?void 0:o.name),n(!1),e.next=29;break;case 22:return e.prev=22,e.t0=e.catch(2),u()("#name").attr({pattern:""}),u()("#name")[0].setCustomValidity("server error"),r.preventDefault(),i.current=!0,e.abrupt("return");case 29:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),value:m?"log in":"create account"})]}),m?Object(p.jsxs)("p",{children:["Don\u2019t have account?"," ",Object(p.jsx)("button",{className:"change-method",onClick:function(){return j(!1)},children:"sign up"})]}):Object(p.jsxs)("p",{children:["Have account?"," ",Object(p.jsx)("button",{className:"change-method",onClick:function(){return j(!0)},children:"sign in"})]})]})})}),w=function(e){var t=e.message,n=t.text,a=t.error,i=e.setMessage,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(null!=c.current&&n){var e=u()(c.current);e.css("transform","translate(50%, -4em)"),setTimeout((function(){e.css("transform","translate(50%)"),setTimeout((function(){e.css("transform","translate(50%, -4em)"),setTimeout((function(){i({text:"",error:!1})}),1e3)}),4e3)}),100)}}),[c,n,i]),Object(p.jsx)("p",{id:"message",style:{transform:"translate(50%, -4em)",position:"fixed",top:"0.1em",right:"50%",transition:"transform 500ms ease-in-out",backgroundColor:a?"red":"var(--fn-colour-m)",border:"0.1em solid var(--bg-colour-t)",color:"var(--bg-colour-m)",zIndex:1e5,padding:"0 1em",borderRadius:"1em",fontSize:"1.2rem"},ref:c,children:n})};var E=function(){var e=v({text:"",error:!1}),t=Object(o.a)(e,2),n=t[0],a=t[1],i=v((new Date).getFullYear()),c=Object(o.a)(i,2),u=c[0],l=c[1],m=v(!1),b=Object(o.a)(m,2),f=b[0],D=b[1],y=v((new Date).getMonth()),C=Object(o.a)(y,2),E=C[0],M=C[1],S=v((new Date).getDate()),k=Object(o.a)(S,2),N=k[0],A=k[1];d(E,u)<N&&A(d(E,u));var I=v((function(){return j(0)})),B=Object(o.a)(I,2),V=B[0],R=B[1],q=v([-1,-1]),H=Object(o.a)(q,2),P=H[0],z=H[1],J=v(function(){var e="deafault-user";return Object(s.get)("/calendar/user",(function(t){Y(e=t)})),e}()),U=Object(o.a)(J,2),$=U[0],Y=U[1],Z=Object(r.useRef)(null),_=Z.current,W=v({}),G=Object(o.a)(W,2),K=G[0],L=G[1],Q=v(!1),X=Object(o.a)(Q,2),ee=X[0],te=X[1],ne=new Date(u,E,1).getDay();return Object(p.jsxs)("div",{id:"App",children:[Object(p.jsx)(w,{message:n,setMessage:a}),Object(p.jsx)(g,{setSignIn:D,user:$,setUser:Y,allEvents:K,setMessage:a}),Object(p.jsx)(h,{year:u,month:E,dateRange:d(E,u),lastDateRange:d(0===E?11:E-1,0===E?u-1:u),dateStartAt:ne,selectedDate:N,setDate:A,setMonth:M,setYear:l,setFocused:z}),Object(p.jsx)(O,{year:u,month:E,date:N,user:$,Ref:Z,CreateEvent:function(){return te(!0)},ShowEvents:V,allEvents:K,setAllEvents:L,setFocused:z,Focused:P}),Object(p.jsx)(F,{Events:_,changeEventShowed:R,setFocus:z}),ee&&Object(p.jsx)(x,{Ref:Z,toggleCreation:te,changeEventShowed:R,setFocus:z,setMessage:a}),f&&Object(p.jsx)(T,{setUser:Y,setSignIn:D})]})};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.4e0314c9.chunk.js.map